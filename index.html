<!DOCTYPE html>
<html><head><meta name="GCD" content="YTk3ODQ3ZWZhN2I4NzZmMzBkNTEwYjJl9ef0fa116f17e251a694d455563c6c57"/>
  <meta charset="utf-8">
  <title>vaccine</title>
  <meta name="generator" content="Google Web Designer 11.0.2.0415">
  <style type="text/css" id="gwd-text-style">p {
    margin: 0px;
}
h1 {
    margin: 0px;
}
h2 {
    margin: 0px;
}
h3 {
    margin: 0px;
}</style>
  <style type="text/css">html,
body {
    width: 100%;
    height: 100%;
    margin: 0px;
}
body {
    transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    perspective: 1400px;
    transform-style: preserve-3d;
    background-image: none;
    background-color: rgb(0, 0, 0);
}
.gwd-button-16fg {
    position: absolute;
    width: 100px;
    height: 24px;
    color: rgb(0, 0, 0);
    left: 544px;
    top: 237px;
}
.gwd-label-abil {
    position: absolute;
    left: 120px;
    color: rgb(255, 255, 255);
    width: 560px;
    height: 69px;
    top: 147px;
}
.gwd-label-is1i {
    position: absolute;
    left: 120px;
    top: 41px;
    color: rgb(255, 255, 255);
    width: 462px;
    height: 129px;
    font-size: 58px;
}
.gwd-div-l7wo {
    position: absolute;
    height: 214px;
    width: 605px;
    left: 120px;
    top: 272px;
}
.gwd-select-1aa9 {
    position: absolute;
    width: 100px;
    height: 24px;
    top: 237px;
    left: 120px;
}
.gwd-select-1o97 {
    position: absolute;
    width: 100px;
    height: 24px;
    top: 237px;
    left: 332px;
}</style>
  <script type="text/javascript" gwd-events="support">var gwd=gwd||{};gwd.actions=gwd.actions||{};gwd.actions.events=gwd.actions.events||{};gwd.actions.events.getElementById=function(id){var element=document.getElementById(id);if(!element){var pageDeck=document.querySelector("gwd-pagedeck");if(pageDeck){if(typeof pageDeck.getElementById==="function"){element=pageDeck.getElementById(id)}}}if(!element){switch(id){case"document.body":element=document.body;break;case"document":element=document;break;case"window":element=window;break;default:break}}return element};gwd.actions.events.addHandler=function(eventTarget,eventName,eventHandler,useCapture){var targetElement=gwd.actions.events.getElementById(eventTarget);if(targetElement){targetElement.addEventListener(eventName,eventHandler,useCapture)}};gwd.actions.events.removeHandler=function(eventTarget,eventName,eventHandler,useCapture){var targetElement=gwd.actions.events.getElementById(eventTarget);if(targetElement){targetElement.removeEventListener(eventName,eventHandler,useCapture)}};gwd.actions.events.setInlineStyle=function(id,styles){var element=gwd.actions.events.getElementById(id);if(!element||!styles){return}var transitionProperty=element.style.transition!==undefined?"transition":"-webkit-transition";var prevTransition=element.style[transitionProperty];var splitStyles=styles.split(/\s*;\s*/);var nameValue;splitStyles.forEach(function(splitStyle){if(splitStyle){var regex=new RegExp("[:](?![/]{2})");nameValue=splitStyle.split(regex);nameValue[1]=nameValue[1]?nameValue[1].trim():null;if(!(nameValue[0]&&nameValue[1])){return}element.style.setProperty(nameValue[0],nameValue[1])}});function restoreTransition(event){var el=event.target;el.style.transition=prevTransition;el.removeEventListener(event.type,restoreTransition,false)}element.addEventListener("transitionend",restoreTransition,false);element.addEventListener("webkitTransitionEnd",restoreTransition,false)}</script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    var slotint = "no";
  </script>
  <script type="text/javascript" gwd-events="handlers">
    window.gwd = window.gwd || {};
    gwd.checkslots = function(event) {
      //hello
      document.getElementById("label_1").innerHTML = "checking";
      //document.getElementById("button_1").style.display = "none";
      navigator.serviceWorker.register("sw.js");
      // Let's check if the browser supports notifications
      if (!("Notification" in window)) {
        alert("This browser does not support desktop notification");
      }
      // Let's check whether notification permissions have already been granted
      else if (Notification.permission === "granted") {
        // If it's okay let's create a notification
        //var notification = new Notification("Hi there!");
      }
      // Otherwise, we need to ask the user for permission
      else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(function(permission) {
          // If the user accepts, let's create a notification
          if (permission === "granted") {
            //var notification = new Notification("Hi there!");
          }
        });
      }

      function slotmslot() {
        var d = new Date();
        $.getJSON("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=" + document.getElementById("select_2").value + "&date=" + d.getDate() + "-" + (d.getMonth() + 1) + "-" + d.getFullYear(), function(data) {
          var mystr = " ";
          var adr = " ";
          for (var i = 0; i < data.centers.length; i++) {
            var pincode = parseInt(data.centers[i].pincode);
            if (document.getElementById("box_" + pincode).checked) {
              for (var j = 0; j < data.centers[i].sessions.length; j++) {
                var avl = parseInt(data.centers[i].sessions[j].available_capacity);
                var age = parseInt(data.centers[i].sessions[j].min_age_limit);
                if (avl != 0 && age == 18) {
                  mystr = "hendo hendo";
                  adr = adr + "available at " + pincode + ",\n";
                } else {
                  if (mystr != "hendo hendo") {
                    mystr = "no slots available. automatically checking every 10 seconds. don't close tab. its ok to open other tabs or minimize";
                  }
                }
              }
            }
          }
          //hello 
          if (mystr == "hendo hendo") {
            document.getElementById("label_1").innerHTML = adr;
            navigator.serviceWorker.ready.then(function(registration) {
              registration.showNotification("chalo jaldi", {
                vibrate: [100, 50, 100],
                body: adr
              });
            });
          } else document.getElementById("label_1").innerHTML = mystr;
        });
      }
      if (slotint != "no") {
        clearInterval(slotint);
      }
      slotmslot();
      slotint = setInterval(slotmslot, 10000);
    };
    gwd.findDistricts = function(event) {
      // ha na ha na
      var optslength = document.getElementById("select_2").options.length;
      for (var j = optslength - 1; j >= 1; j--) {
        document.getElementById("select_2").options[j] = null;
      }
      var sttid = document.getElementById("select_1").value;
      if (sttid != "none") {
        $.getJSON("https://cdn-api.co-vin.in/api/v2/admin/location/districts/" + sttid, function(data) {
          for (var i = 0; i < data.districts.length; i++) {
            var op = document.createElement("option");
            op.text = data.districts[i].district_name;
            op.value = data.districts[i].district_id;
            document.getElementById("select_2").add(op);
          }
        });
      }
    };
    gwd.findpins = function(event) {
      //yyayyya
      var dv = document.getElementById("div1");
      while (dv.hasChildNodes()) {
        dv.removeChild(dv.firstChild);
      }
      var d = new Date();
      $.getJSON("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=" + document.getElementById("select_2").value + "&date=" + d.getDate() + "-" + (d.getMonth() + 1) + "-" + d.getFullYear(), function(data) {
        for (var i = 0; i < data.centers.length; i++) {
          var pincode = parseInt(data.centers[i].pincode);
          var chkchk = document.getElementById("box_" + pincode);
          if (chkchk == null) {
            var chkbx = document.createElement("input");
            chkbx.type = "checkbox";
            chkbx.id = "box_" + pincode;
            chkbx.value = pincode;
            var lbl = document.createElement("lable");
            lbl.appendChild(document.createTextNode(pincode));
            lbl.style.color = "#ffffff";
            document.getElementById("div1").appendChild(lbl);
            document.getElementById("div1").appendChild(chkbx);
            document.getElementById("div1").appendChild(document.createTextNode("         "));
          }
        }
      });
    };
  </script>
  <script type="text/javascript" gwd-events="registration">
    // Support code for event handling in Google Web Designer
    // This script block is auto-generated. Please do not edit!
    gwd.actions.events.registerEventHandlers = function(event) {
      gwd.actions.events.addHandler('button_1', 'click', gwd.checkslots, false);
      gwd.actions.events.addHandler('select_1', 'change', gwd.findDistricts, false);
      gwd.actions.events.addHandler('select_2', 'change', gwd.findpins, false);
    };
    gwd.actions.events.deregisterEventHandlers = function(event) {
      gwd.actions.events.removeHandler('button_1', 'click', gwd.checkslots, false);
      gwd.actions.events.removeHandler('select_1', 'change', gwd.findDistricts, false);
      gwd.actions.events.removeHandler('select_2', 'change', gwd.findpins, false);
    };
    document.addEventListener("DOMContentLoaded", gwd.actions.events.registerEventHandlers);
    document.addEventListener("unload", gwd.actions.events.deregisterEventHandlers);
  </script>
  <script>
    function getstates() {
      //document.getElementById("label_1").innerHTML = "ha bapu";
      $.getJSON("https://cdn-api.co-vin.in/api/v2/admin/location/states", function(data) {
        for (var i = 0; i < data.states.length; i++) {
          var op = document.createElement("option");
          op.text = data.states[i].state_name;
          op.value = data.states[i].state_id;
          document.getElementById("select_1").add(op);

        }
      });

    }
  </script>
</head>

<body class="htmlNoPages" onload="getstates()">
  <button id="button_1" class="gwd-button-16fg">check</button>
  <label id="label_1" class="gwd-label-abil">select following</label>
  <label id="label_2" class="gwd-label-is1i">Mahadev Mahadev</label>
  <div class="gwd-div-l7wo" id="div1"></div>
  <select id="select_1" class="gwd-select-1aa9">
    <option value="none" selected="">select state</option>
  </select>
  <select id="select_2" class="gwd-select-1o97">
    <option value="none" selected="">select district</option>
  </select>


</body></html>
